<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UML Documentation - amoeba-homepage-3d</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-primary: #1a1a2e;
      --bg-secondary: #16213e;
      --bg-tertiary: #0f0f23;
      --text-primary: #e8e8e8;
      --text-secondary: #a0a0a0;
      --accent-blue: #4f46e5;
      --accent-pink: #ec4899;
      --accent-green: #22c55e;
      --accent-orange: #f59e0b;
      --accent-cyan: #06b6d4;
      --border-color: #2a2a4a;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
    }

    /* Layout */
    .container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-color);
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      padding: 20px;
    }

    .sidebar-header {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border-color);
    }

    .sidebar-header h1 {
      font-size: 1.2rem;
      color: var(--accent-cyan);
      margin-bottom: 5px;
    }

    .sidebar-header p {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    .nav-section {
      margin-bottom: 20px;
    }

    .nav-section-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-secondary);
      margin-bottom: 10px;
    }

    .nav-link {
      display: block;
      padding: 8px 12px;
      color: var(--text-primary);
      text-decoration: none;
      border-radius: 6px;
      font-size: 0.9rem;
      transition: background 0.2s;
    }

    .nav-link:hover {
      background: rgba(79, 70, 229, 0.2);
    }

    .nav-link.active {
      background: var(--accent-blue);
    }

    /* Search */
    .search-box {
      margin-bottom: 20px;
    }

    .search-input {
      width: 100%;
      padding: 10px 12px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 6px;
      color: var(--text-primary);
      font-size: 0.9rem;
    }

    .search-input::placeholder {
      color: var(--text-secondary);
    }

    .search-input:focus {
      outline: none;
      border-color: var(--accent-blue);
    }

    /* Main Content */
    .main {
      flex: 1;
      margin-left: 280px;
      padding: 40px;
      max-width: 1200px;
    }

    section {
      margin-bottom: 60px;
    }

    h2 {
      font-size: 1.8rem;
      color: var(--accent-cyan);
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--border-color);
    }

    h3 {
      font-size: 1.3rem;
      color: var(--text-primary);
      margin: 25px 0 15px;
    }

    h4 {
      font-size: 1.1rem;
      color: var(--accent-pink);
      margin: 20px 0 10px;
    }

    p {
      color: var(--text-secondary);
      margin-bottom: 15px;
    }

    /* Cards */
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .card-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    /* Tech badges */
    .badge-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 15px 0;
    }

    .badge {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
    }

    .badge-blue { background: rgba(79, 70, 229, 0.2); color: var(--accent-blue); }
    .badge-pink { background: rgba(236, 72, 153, 0.2); color: var(--accent-pink); }
    .badge-green { background: rgba(34, 197, 94, 0.2); color: var(--accent-green); }
    .badge-orange { background: rgba(245, 158, 11, 0.2); color: var(--accent-orange); }
    .badge-cyan { background: rgba(6, 182, 212, 0.2); color: var(--accent-cyan); }

    /* File Tree */
    .file-tree {
      background: var(--bg-tertiary);
      border-radius: 8px;
      padding: 20px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.85rem;
      overflow-x: auto;
    }

    .tree-item {
      padding: 3px 0;
      color: var(--text-secondary);
    }

    .tree-folder {
      color: var(--accent-orange);
    }

    .tree-file {
      color: var(--text-primary);
    }

    .tree-indent {
      margin-left: 20px;
    }

    /* Diagrams */
    .diagram-container {
      background: var(--bg-tertiary);
      border-radius: 12px;
      padding: 30px;
      margin: 20px 0;
      overflow-x: auto;
    }

    .diagram-svg {
      display: block;
      margin: 0 auto;
      max-width: 100%;
    }

    .diagram-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--border-color);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
    }

    .legend-box {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }

    /* Collapsible */
    .collapsible {
      cursor: pointer;
      user-select: none;
    }

    .collapsible::before {
      content: 'â–¼ ';
      display: inline-block;
      transition: transform 0.2s;
    }

    .collapsible.collapsed::before {
      transform: rotate(-90deg);
    }

    .collapsible-content {
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .collapsible-content.hidden {
      max-height: 0 !important;
    }

    /* Tables */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }

    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }

    th {
      background: var(--bg-tertiary);
      color: var(--accent-cyan);
      font-weight: 600;
    }

    td {
      color: var(--text-secondary);
    }

    code {
      background: var(--bg-tertiary);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.85em;
      color: var(--accent-pink);
    }

    /* Info boxes */
    .info-box {
      padding: 15px 20px;
      border-radius: 8px;
      margin: 15px 0;
      border-left: 4px solid;
    }

    .info-box.note {
      background: rgba(79, 70, 229, 0.1);
      border-color: var(--accent-blue);
    }

    .info-box.warning {
      background: rgba(245, 158, 11, 0.1);
      border-color: var(--accent-orange);
    }

    .info-box.success {
      background: rgba(34, 197, 94, 0.1);
      border-color: var(--accent-green);
    }

    /* Sequence Diagram */
    .sequence-diagram {
      display: flex;
      flex-direction: column;
      gap: 15px;
      padding: 20px;
    }

    .sequence-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sequence-actor {
      min-width: 100px;
      padding: 8px 16px;
      background: var(--bg-secondary);
      border: 2px solid var(--accent-blue);
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
    }

    .sequence-arrow {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sequence-line {
      flex: 1;
      height: 2px;
      background: var(--accent-cyan);
      position: relative;
    }

    .sequence-line::after {
      content: '';
      position: absolute;
      right: 0;
      top: -4px;
      border: 5px solid transparent;
      border-left-color: var(--accent-cyan);
    }

    .sequence-label {
      font-size: 0.8rem;
      color: var(--text-secondary);
      white-space: nowrap;
    }

    /* Footer */
    footer {
      margin-top: 60px;
      padding: 30px;
      background: var(--bg-secondary);
      border-radius: 12px;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    footer h4 {
      color: var(--text-primary);
      margin-bottom: 15px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        display: none;
      }
      .main {
        margin-left: 0;
        padding: 20px;
      }
    }

    /* Search Results */
    .search-results {
      margin-top: 10px;
    }

    .search-result-item {
      padding: 8px;
      background: var(--bg-tertiary);
      border-radius: 4px;
      margin-bottom: 5px;
      cursor: pointer;
    }

    .search-result-item:hover {
      background: rgba(79, 70, 229, 0.2);
    }

    .highlight {
      background: rgba(245, 158, 11, 0.3);
      padding: 0 2px;
      border-radius: 2px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <nav class="sidebar">
      <div class="sidebar-header">
        <h1>amoeba-homepage-3d</h1>
        <p>UML Documentation</p>
      </div>

      <div class="search-box">
        <input type="text" class="search-input" id="searchInput" placeholder="Search components...">
        <div class="search-results" id="searchResults"></div>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Overview</div>
        <a href="#overview" class="nav-link">Project Overview</a>
        <a href="#repository" class="nav-link">Repository Map</a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Architecture</div>
        <a href="#architecture" class="nav-link">Architecture Diagram</a>
        <a href="#modules" class="nav-link">Module Diagrams</a>
        <a href="#types" class="nav-link">Type Diagram</a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Flow</div>
        <a href="#sequence" class="nav-link">Call Flow</a>
        <a href="#dependencies" class="nav-link">Dependencies</a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Analysis</div>
        <a href="#quality" class="nav-link">Quality Notes</a>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
      <!-- Project Overview -->
      <section id="overview">
        <h2>Project Overview</h2>

        <div class="info-box note">
          <strong>Static analysis only</strong> - No code was executed during this analysis.
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-icon" style="background: rgba(79, 70, 229, 0.2);">
              <span style="color: var(--accent-blue);">3D</span>
            </div>
            <div>
              <h3 style="margin: 0;">amoeba-homepage-3d</h3>
              <p style="margin: 0; font-size: 0.85rem;">Interactive 3D Homepage with Scroll Animations</p>
            </div>
          </div>

          <p>This is a <strong>Next.js 16</strong> application that creates an interactive 3D homepage experience using Three.js and React Three Fiber. The page features scroll-driven animations with various geometric shapes rendered as point clouds.</p>

          <h4>Detected Technologies</h4>
          <div class="badge-list">
            <span class="badge badge-blue">TypeScript</span>
            <span class="badge badge-pink">Next.js 16.1.1</span>
            <span class="badge badge-green">React 19.2.3</span>
            <span class="badge badge-orange">Three.js 0.182.0</span>
            <span class="badge badge-cyan">Tailwind CSS 4</span>
          </div>

          <h4>Key Libraries</h4>
          <table>
            <thead>
              <tr>
                <th>Library</th>
                <th>Version</th>
                <th>Purpose</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>@react-three/fiber</code></td>
                <td>9.5.0</td>
                <td>React renderer for Three.js</td>
              </tr>
              <tr>
                <td><code>@react-three/drei</code></td>
                <td>10.7.7</td>
                <td>Useful helpers for R3F</td>
              </tr>
              <tr>
                <td><code>three</code></td>
                <td>0.182.0</td>
                <td>3D graphics library</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Repository Map -->
      <section id="repository">
        <h2>Repository Map</h2>

        <h3 class="collapsible" onclick="toggleCollapse(this)">Directory Structure</h3>
        <div class="collapsible-content">
          <div class="file-tree">
            <div class="tree-item tree-folder">amoeba-homepage-3d/</div>
            <div class="tree-indent">
              <div class="tree-item tree-folder">.claude/</div>
              <div class="tree-indent">
                <div class="tree-item tree-folder">skills/</div>
                <div class="tree-indent">
                  <div class="tree-item tree-file">uml.md</div>
                </div>
              </div>
              <div class="tree-item tree-folder">public/</div>
              <div class="tree-indent">
                <div class="tree-item tree-folder">models/</div>
                <div class="tree-indent">
                  <div class="tree-item tree-file">(empty)</div>
                </div>
              </div>
              <div class="tree-item tree-folder">src/</div>
              <div class="tree-indent">
                <div class="tree-item tree-folder">app/</div>
                <div class="tree-indent">
                  <div class="tree-item tree-file">layout.tsx</div>
                  <div class="tree-item tree-file">page.tsx</div>
                  <div class="tree-item tree-file">globals.css</div>
                </div>
                <div class="tree-item tree-folder">components/</div>
                <div class="tree-indent">
                  <div class="tree-item tree-folder">three/</div>
                  <div class="tree-indent">
                    <div class="tree-item tree-file">Scene.tsx</div>
                  </div>
                </div>
              </div>
              <div class="tree-item tree-file">package.json</div>
              <div class="tree-item tree-file">tsconfig.json</div>
              <div class="tree-item tree-file">next.config.ts</div>
              <div class="tree-item tree-file">eslint.config.mjs</div>
              <div class="tree-item tree-file">postcss.config.mjs</div>
            </div>
          </div>
        </div>

        <h3>Key Files</h3>
        <table>
          <thead>
            <tr>
              <th>File</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>src/app/page.tsx</code></td>
              <td>Main page component with scroll handling and UI sections</td>
            </tr>
            <tr>
              <td><code>src/app/layout.tsx</code></td>
              <td>Root layout with font configuration and metadata</td>
            </tr>
            <tr>
              <td><code>src/components/three/Scene.tsx</code></td>
              <td>Core 3D scene with all shape animations (~550 lines)</td>
            </tr>
            <tr>
              <td><code>package.json</code></td>
              <td>Project dependencies and npm scripts</td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Architecture Diagram -->
      <section id="architecture">
        <h2>Architecture Diagram</h2>

        <div class="diagram-container">
          <svg class="diagram-svg" width="800" height="450" viewBox="0 0 800 450">
            <!-- Background grid -->
            <defs>
              <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#2a2a4a" stroke-width="0.5"/>
              </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#grid)"/>

            <!-- Layer labels -->
            <text x="20" y="30" fill="#a0a0a0" font-size="12">UI Layer</text>
            <text x="20" y="180" fill="#a0a0a0" font-size="12">3D Rendering Layer</text>
            <text x="20" y="350" fill="#a0a0a0" font-size="12">Core Libraries</text>

            <!-- UI Layer -->
            <rect x="150" y="50" width="180" height="80" rx="8" fill="#1a1a2e" stroke="#4f46e5" stroke-width="2"/>
            <text x="240" y="85" fill="#e8e8e8" text-anchor="middle" font-weight="bold">Home Page</text>
            <text x="240" y="105" fill="#a0a0a0" text-anchor="middle" font-size="11">page.tsx</text>
            <text x="240" y="120" fill="#a0a0a0" text-anchor="middle" font-size="10">Scroll handling, UI sections</text>

            <rect x="450" y="50" width="180" height="80" rx="8" fill="#1a1a2e" stroke="#ec4899" stroke-width="2"/>
            <text x="540" y="85" fill="#e8e8e8" text-anchor="middle" font-weight="bold">Root Layout</text>
            <text x="540" y="105" fill="#a0a0a0" text-anchor="middle" font-size="11">layout.tsx</text>
            <text x="540" y="120" fill="#a0a0a0" text-anchor="middle" font-size="10">Fonts, metadata</text>

            <!-- Arrows UI to 3D -->
            <path d="M 240 130 L 240 190" stroke="#4f46e5" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
            <text x="250" y="165" fill="#a0a0a0" font-size="10">scrollProgress</text>

            <!-- 3D Layer -->
            <rect x="100" y="200" width="600" height="120" rx="8" fill="rgba(34, 197, 94, 0.1)" stroke="#22c55e" stroke-width="1" stroke-dasharray="5,5"/>
            <text x="110" y="220" fill="#22c55e" font-size="11">Scene.tsx (3D Components)</text>

            <!-- Scene components -->
            <rect x="120" y="240" width="120" height="60" rx="6" fill="#1a1a2e" stroke="#22c55e" stroke-width="2"/>
            <text x="180" y="265" fill="#e8e8e8" text-anchor="middle" font-size="12">ScrollScene</text>
            <text x="180" y="280" fill="#a0a0a0" text-anchor="middle" font-size="9">Main orchestrator</text>

            <rect x="260" y="240" width="120" height="60" rx="6" fill="#1a1a2e" stroke="#f59e0b" stroke-width="2"/>
            <text x="320" y="265" fill="#e8e8e8" text-anchor="middle" font-size="12">PointShape</text>
            <text x="320" y="280" fill="#a0a0a0" text-anchor="middle" font-size="9">Shape animations</text>

            <rect x="400" y="240" width="140" height="60" rx="6" fill="#1a1a2e" stroke="#ec4899" stroke-width="2"/>
            <text x="470" y="265" fill="#e8e8e8" text-anchor="middle" font-size="12">ScatterToForm</text>
            <text x="470" y="280" fill="#a0a0a0" text-anchor="middle" font-size="9">Morphing animation</text>

            <rect x="560" y="240" width="120" height="60" rx="6" fill="#1a1a2e" stroke="#06b6d4" stroke-width="2"/>
            <text x="620" y="265" fill="#e8e8e8" text-anchor="middle" font-size="12">IntroShapes</text>
            <text x="620" y="280" fill="#a0a0a0" text-anchor="middle" font-size="9">Initial grouped shapes</text>

            <!-- Internal arrows -->
            <path d="M 180 300 L 180 320 L 260 320 L 260 300" stroke="#a0a0a0" stroke-width="1" fill="none"/>
            <path d="M 180 300 L 180 320 L 400 320 L 400 300" stroke="#a0a0a0" stroke-width="1" fill="none"/>
            <path d="M 180 300 L 180 320 L 560 320 L 560 300" stroke="#a0a0a0" stroke-width="1" fill="none"/>

            <!-- Core Libraries -->
            <rect x="150" y="370" width="120" height="50" rx="6" fill="#1a1a2e" stroke="#4f46e5" stroke-width="2"/>
            <text x="210" y="400" fill="#e8e8e8" text-anchor="middle" font-size="12">React Three Fiber</text>

            <rect x="300" y="370" width="100" height="50" rx="6" fill="#1a1a2e" stroke="#f59e0b" stroke-width="2"/>
            <text x="350" y="400" fill="#e8e8e8" text-anchor="middle" font-size="12">Three.js</text>

            <rect x="430" y="370" width="100" height="50" rx="6" fill="#1a1a2e" stroke="#ec4899" stroke-width="2"/>
            <text x="480" y="400" fill="#e8e8e8" text-anchor="middle" font-size="12">Drei</text>

            <rect x="560" y="370" width="100" height="50" rx="6" fill="#1a1a2e" stroke="#22c55e" stroke-width="2"/>
            <text x="610" y="400" fill="#e8e8e8" text-anchor="middle" font-size="12">Next.js</text>

            <!-- Arrow markers -->
            <defs>
              <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#4f46e5"/>
              </marker>
            </defs>
          </svg>

          <div class="diagram-legend">
            <div class="legend-item">
              <div class="legend-box" style="background: rgba(79, 70, 229, 0.3); border: 2px solid #4f46e5;"></div>
              <span>Page Components</span>
            </div>
            <div class="legend-item">
              <div class="legend-box" style="background: rgba(34, 197, 94, 0.3); border: 2px solid #22c55e;"></div>
              <span>3D Components</span>
            </div>
            <div class="legend-item">
              <div class="legend-box" style="background: rgba(245, 158, 11, 0.3); border: 2px solid #f59e0b;"></div>
              <span>Shape Renderers</span>
            </div>
            <div class="legend-item">
              <div class="legend-box" style="background: rgba(236, 72, 153, 0.3); border: 2px solid #ec4899;"></div>
              <span>Special Animation</span>
            </div>
          </div>
        </div>

        <p><strong>Summary:</strong> The application follows a simple layered architecture. The Home page handles scroll events and passes scroll progress to the 3D Scene component, which orchestrates multiple animated shape components built on Three.js and React Three Fiber.</p>
      </section>

      <!-- Module Diagrams -->
      <section id="modules">
        <h2>Module/Package Diagrams</h2>

        <h3 class="collapsible" onclick="toggleCollapse(this)">src/app Module</h3>
        <div class="collapsible-content">
          <div class="diagram-container">
            <svg class="diagram-svg" width="600" height="280" viewBox="0 0 600 280">
              <rect x="50" y="30" width="500" height="220" rx="8" fill="rgba(79, 70, 229, 0.1)" stroke="#4f46e5" stroke-width="1" stroke-dasharray="5,5"/>
              <text x="60" y="50" fill="#4f46e5" font-size="11">src/app/</text>

              <rect x="80" y="70" width="200" height="70" rx="6" fill="#1a1a2e" stroke="#ec4899" stroke-width="2"/>
              <text x="180" y="100" fill="#e8e8e8" text-anchor="middle" font-weight="bold">layout.tsx</text>
              <text x="180" y="120" fill="#a0a0a0" text-anchor="middle" font-size="10">RootLayout component</text>

              <rect x="320" y="70" width="200" height="70" rx="6" fill="#1a1a2e" stroke="#22c55e" stroke-width="2"/>
              <text x="420" y="100" fill="#e8e8e8" text-anchor="middle" font-weight="bold">page.tsx</text>
              <text x="420" y="120" fill="#a0a0a0" text-anchor="middle" font-size="10">Home component ('use client')</text>

              <rect x="200" y="170" width="200" height="60" rx="6" fill="#1a1a2e" stroke="#06b6d4" stroke-width="2"/>
              <text x="300" y="200" fill="#e8e8e8" text-anchor="middle" font-weight="bold">globals.css</text>
              <text x="300" y="215" fill="#a0a0a0" text-anchor="middle" font-size="10">Tailwind + custom styles</text>

              <!-- Arrows -->
              <path d="M 180 140 L 180 160 L 200 170" stroke="#a0a0a0" stroke-width="1" fill="none"/>
              <path d="M 420 140 L 420 160 L 400 170" stroke="#a0a0a0" stroke-width="1" fill="none"/>
            </svg>
          </div>
          <p><strong>Summary:</strong> The app module contains the Next.js App Router structure with a root layout, main page, and global styles. The page component is marked as a client component for interactivity.</p>
        </div>

        <h3 class="collapsible" onclick="toggleCollapse(this)">src/components/three Module</h3>
        <div class="collapsible-content">
          <div class="diagram-container">
            <svg class="diagram-svg" width="700" height="400" viewBox="0 0 700 400">
              <rect x="30" y="20" width="640" height="360" rx="8" fill="rgba(34, 197, 94, 0.1)" stroke="#22c55e" stroke-width="1" stroke-dasharray="5,5"/>
              <text x="40" y="40" fill="#22c55e" font-size="11">src/components/three/Scene.tsx</text>

              <!-- Main export -->
              <rect x="260" y="60" width="180" height="60" rx="6" fill="#1a1a2e" stroke="#4f46e5" stroke-width="3"/>
              <text x="350" y="90" fill="#e8e8e8" text-anchor="middle" font-weight="bold">Scene (default export)</text>
              <text x="350" y="105" fill="#a0a0a0" text-anchor="middle" font-size="10">Canvas + ScrollScene</text>

              <!-- Internal components -->
              <rect x="60" y="160" width="140" height="50" rx="6" fill="#1a1a2e" stroke="#f59e0b" stroke-width="2"/>
              <text x="130" y="185" fill="#e8e8e8" text-anchor="middle" font-size="12">ParticleBackground</text>
              <text x="130" y="200" fill="#a0a0a0" text-anchor="middle" font-size="9">200 particles</text>

              <rect x="220" y="160" width="130" height="50" rx="6" fill="#1a1a2e" stroke="#ec4899" stroke-width="2"/>
              <text x="285" y="185" fill="#e8e8e8" text-anchor="middle" font-size="12">IntroShapes</text>
              <text x="285" y="200" fill="#a0a0a0" text-anchor="middle" font-size="9">5 grouped shapes</text>

              <rect x="370" y="160" width="120" height="50" rx="6" fill="#1a1a2e" stroke="#22c55e" stroke-width="2"/>
              <text x="430" y="185" fill="#e8e8e8" text-anchor="middle" font-size="12">PointShape</text>
              <text x="430" y="200" fill="#a0a0a0" text-anchor="middle" font-size="9">4 animation types</text>

              <rect x="510" y="160" width="140" height="50" rx="6" fill="#1a1a2e" stroke="#06b6d4" stroke-width="2"/>
              <text x="580" y="185" fill="#e8e8e8" text-anchor="middle" font-size="12">ScatterToFormShape</text>
              <text x="580" y="200" fill="#a0a0a0" text-anchor="middle" font-size="9">Morphing effect</text>

              <!-- Helper functions -->
              <rect x="140" y="260" width="180" height="45" rx="6" fill="#1a1a2e" stroke="#a0a0a0" stroke-width="1"/>
              <text x="230" y="285" fill="#e8e8e8" text-anchor="middle" font-size="11">createShapePoints()</text>
              <text x="230" y="298" fill="#a0a0a0" text-anchor="middle" font-size="9">box, sphere, torus, octahedron, cone</text>

              <rect x="380" y="260" width="140" height="45" rx="6" fill="#1a1a2e" stroke="#a0a0a0" stroke-width="1"/>
              <text x="450" y="285" fill="#e8e8e8" text-anchor="middle" font-size="11">noise3D()</text>
              <text x="450" y="298" fill="#a0a0a0" text-anchor="middle" font-size="9">Clustering noise</text>

              <!-- Data -->
              <rect x="200" y="330" width="300" height="35" rx="6" fill="#1a1a2e" stroke="#ec4899" stroke-width="1"/>
              <text x="350" y="352" fill="#e8e8e8" text-anchor="middle" font-size="11">shapes: ShapeData[] (5 shapes with animations)</text>

              <!-- Connections -->
              <path d="M 350 120 L 350 140 L 130 155" stroke="#a0a0a0" stroke-width="1" fill="none"/>
              <path d="M 350 120 L 350 140 L 285 155" stroke="#a0a0a0" stroke-width="1" fill="none"/>
              <path d="M 350 120 L 350 140 L 430 155" stroke="#a0a0a0" stroke-width="1" fill="none"/>
              <path d="M 350 120 L 350 140 L 580 155" stroke="#a0a0a0" stroke-width="1" fill="none"/>

              <path d="M 430 210 L 430 230 L 230 255" stroke="#a0a0a0" stroke-width="1" fill="none" stroke-dasharray="3,3"/>
              <path d="M 580 210 L 580 230 L 450 255" stroke="#a0a0a0" stroke-width="1" fill="none" stroke-dasharray="3,3"/>
            </svg>
          </div>
          <p><strong>Summary:</strong> Scene.tsx is a monolithic module containing all 3D-related components. It exports a single Scene component that manages the Canvas and orchestrates child components for particles, intro animations, and individual shape animations.</p>
        </div>
      </section>

      <!-- Type Diagram -->
      <section id="types">
        <h2>Class/Type Diagram</h2>

        <div class="diagram-container">
          <svg class="diagram-svg" width="700" height="350" viewBox="0 0 700 350">
            <!-- Interfaces -->
            <rect x="50" y="30" width="250" height="140" rx="8" fill="#1a1a2e" stroke="#4f46e5" stroke-width="2"/>
            <rect x="50" y="30" width="250" height="30" rx="8" fill="#4f46e5"/>
            <text x="175" y="50" fill="#fff" text-anchor="middle" font-weight="bold">ShapeData</text>
            <text x="60" y="75" fill="#a0a0a0" font-size="12">id: number</text>
            <text x="60" y="95" fill="#a0a0a0" font-size="12">geometry: 'box' | 'torus' | 'sphere' | ...</text>
            <text x="60" y="115" fill="#a0a0a0" font-size="12">color: string</text>
            <text x="60" y="135" fill="#a0a0a0" font-size="12">animation: AnimationType</text>
            <text x="60" y="155" fill="#a0a0a0" font-size="12">pointCount: number</text>

            <rect x="400" y="30" width="250" height="100" rx="8" fill="#1a1a2e" stroke="#ec4899" stroke-width="2"/>
            <rect x="400" y="30" width="250" height="30" rx="8" fill="#ec4899"/>
            <text x="525" y="50" fill="#fff" text-anchor="middle" font-weight="bold">SceneProps</text>
            <text x="410" y="75" fill="#a0a0a0" font-size="12">scrollProgress: number</text>
            <text x="410" y="95" fill="#a0a0a0" font-size="12">// 0 to 1 progress value</text>

            <!-- Type alias -->
            <rect x="50" y="200" width="280" height="80" rx="8" fill="#1a1a2e" stroke="#22c55e" stroke-width="2"/>
            <rect x="50" y="200" width="280" height="30" rx="8" fill="#22c55e"/>
            <text x="190" y="220" fill="#fff" text-anchor="middle" font-weight="bold">AnimationType (union)</text>
            <text x="60" y="250" fill="#a0a0a0" font-size="11">'left-to-center' | 'right-to-center' |</text>
            <text x="60" y="268" fill="#a0a0a0" font-size="11">'zoom-through' | 'curve-zoom' | 'scatter-to-form'</text>

            <rect x="400" y="200" width="250" height="100" rx="8" fill="#1a1a2e" stroke="#f59e0b" stroke-width="2"/>
            <rect x="400" y="200" width="250" height="30" rx="8" fill="#f59e0b"/>
            <text x="525" y="220" fill="#fff" text-anchor="middle" font-weight="bold">shapeInfo (constant)</text>
            <text x="410" y="250" fill="#a0a0a0" font-size="11">Array of { name, description, color }</text>
            <text x="410" y="270" fill="#a0a0a0" font-size="11">Used for UI text display</text>

            <!-- Relationship arrows -->
            <path d="M 175 170 L 175 195" stroke="#a0a0a0" stroke-width="1" fill="none" marker-end="url(#arrowGray)"/>
            <text x="185" y="185" fill="#a0a0a0" font-size="9">uses</text>

            <defs>
              <marker id="arrowGray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#a0a0a0"/>
              </marker>
            </defs>
          </svg>
        </div>

        <p><strong>Summary:</strong> The project uses TypeScript interfaces to define shape data structures. ShapeData is the primary type describing each 3D shape's properties and animation behavior. The project favors functional components over classes.</p>
      </section>

      <!-- Sequence Diagram -->
      <section id="sequence">
        <h2>Call Flow / Sequence</h2>

        <h3>Scroll-Driven Animation Flow</h3>
        <div class="diagram-container">
          <svg class="diagram-svg" width="800" height="400" viewBox="0 0 800 400">
            <!-- Actors -->
            <rect x="50" y="30" width="100" height="40" rx="6" fill="#1a1a2e" stroke="#4f46e5" stroke-width="2"/>
            <text x="100" y="55" fill="#e8e8e8" text-anchor="middle" font-size="12">Browser</text>
            <line x1="100" y1="70" x2="100" y2="380" stroke="#4f46e5" stroke-width="1" stroke-dasharray="5,5"/>

            <rect x="200" y="30" width="100" height="40" rx="6" fill="#1a1a2e" stroke="#22c55e" stroke-width="2"/>
            <text x="250" y="55" fill="#e8e8e8" text-anchor="middle" font-size="12">Home</text>
            <line x1="250" y1="70" x2="250" y2="380" stroke="#22c55e" stroke-width="1" stroke-dasharray="5,5"/>

            <rect x="350" y="30" width="100" height="40" rx="6" fill="#1a1a2e" stroke="#ec4899" stroke-width="2"/>
            <text x="400" y="55" fill="#e8e8e8" text-anchor="middle" font-size="12">Scene</text>
            <line x1="400" y1="70" x2="400" y2="380" stroke="#ec4899" stroke-width="1" stroke-dasharray="5,5"/>

            <rect x="500" y="30" width="120" height="40" rx="6" fill="#1a1a2e" stroke="#f59e0b" stroke-width="2"/>
            <text x="560" y="55" fill="#e8e8e8" text-anchor="middle" font-size="12">ScrollScene</text>
            <line x1="560" y1="70" x2="560" y2="380" stroke="#f59e0b" stroke-width="1" stroke-dasharray="5,5"/>

            <rect x="670" y="30" width="100" height="40" rx="6" fill="#1a1a2e" stroke="#06b6d4" stroke-width="2"/>
            <text x="720" y="55" fill="#e8e8e8" text-anchor="middle" font-size="12">PointShape</text>
            <line x1="720" y1="70" x2="720" y2="380" stroke="#06b6d4" stroke-width="1" stroke-dasharray="5,5"/>

            <!-- Messages -->
            <line x1="100" y1="100" x2="250" y2="100" stroke="#4f46e5" stroke-width="2" marker-end="url(#arrowBlue)"/>
            <text x="175" y="95" fill="#a0a0a0" font-size="10" text-anchor="middle">scroll event</text>

            <line x1="250" y1="130" x2="250" y2="160" stroke="#22c55e" stroke-width="2"/>
            <rect x="180" y="130" width="140" height="25" rx="4" fill="rgba(34, 197, 94, 0.2)" stroke="#22c55e"/>
            <text x="250" y="147" fill="#22c55e" font-size="10" text-anchor="middle">handleScroll()</text>

            <line x1="250" y1="170" x2="250" y2="190" stroke="#22c55e" stroke-width="2"/>
            <rect x="175" y="170" width="150" height="20" rx="4" fill="rgba(34, 197, 94, 0.1)"/>
            <text x="250" y="184" fill="#a0a0a0" font-size="9" text-anchor="middle">setScrollProgress(0.0-1.0)</text>

            <line x1="250" y1="210" x2="400" y2="210" stroke="#22c55e" stroke-width="2" marker-end="url(#arrowGreen)"/>
            <text x="325" y="205" fill="#a0a0a0" font-size="10" text-anchor="middle">scrollProgress prop</text>

            <line x1="400" y1="240" x2="560" y2="240" stroke="#ec4899" stroke-width="2" marker-end="url(#arrowPink)"/>
            <text x="480" y="235" fill="#a0a0a0" font-size="10" text-anchor="middle">scrollProgress</text>

            <line x1="560" y1="270" x2="720" y2="270" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowOrange)"/>
            <text x="640" y="265" fill="#a0a0a0" font-size="10" text-anchor="middle">props</text>

            <line x1="720" y1="300" x2="720" y2="350" stroke="#06b6d4" stroke-width="2"/>
            <rect x="640" y="300" width="160" height="45" rx="4" fill="rgba(6, 182, 212, 0.2)" stroke="#06b6d4"/>
            <text x="720" y="318" fill="#06b6d4" font-size="10" text-anchor="middle">useFrame callback</text>
            <text x="720" y="333" fill="#a0a0a0" font-size="9" text-anchor="middle">Update position, scale,</text>
            <text x="720" y="345" fill="#a0a0a0" font-size="9" text-anchor="middle">opacity based on progress</text>

            <defs>
              <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
              </marker>
              <marker id="arrowPink" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#ec4899"/>
              </marker>
              <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
              </marker>
            </defs>
          </svg>
        </div>

        <p><strong>Summary:</strong> User scroll events trigger the handleScroll function in the Home component, which calculates a normalized progress value (0-1). This progress is passed through Scene to ScrollScene and finally to individual shape components, which update their animations in the useFrame loop.</p>
      </section>

      <!-- Dependencies -->
      <section id="dependencies">
        <h2>Dependencies and Integrations</h2>

        <h3>External Dependencies (Production)</h3>
        <table>
          <thead>
            <tr>
              <th>Package</th>
              <th>Version</th>
              <th>Purpose</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>next</code></td>
              <td>16.1.1</td>
              <td>React framework for production</td>
            </tr>
            <tr>
              <td><code>react</code> / <code>react-dom</code></td>
              <td>19.2.3</td>
              <td>UI library (latest version)</td>
            </tr>
            <tr>
              <td><code>three</code></td>
              <td>0.182.0</td>
              <td>3D graphics engine</td>
            </tr>
            <tr>
              <td><code>@react-three/fiber</code></td>
              <td>9.5.0</td>
              <td>React reconciler for Three.js</td>
            </tr>
            <tr>
              <td><code>@react-three/drei</code></td>
              <td>10.7.7</td>
              <td>Useful helpers (Environment, Points, PointMaterial)</td>
            </tr>
          </tbody>
        </table>

        <h3>Dev Dependencies</h3>
        <table>
          <thead>
            <tr>
              <th>Package</th>
              <th>Purpose</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>typescript</code></td>
              <td>Type checking</td>
            </tr>
            <tr>
              <td><code>tailwindcss</code></td>
              <td>Utility-first CSS</td>
            </tr>
            <tr>
              <td><code>eslint</code> + <code>eslint-config-next</code></td>
              <td>Linting</td>
            </tr>
          </tbody>
        </table>

        <h3>External Services</h3>
        <div class="info-box success">
          <strong>No external services detected.</strong> This is a static/client-side only application with no API calls, databases, or third-party integrations.
        </div>
      </section>

      <!-- Quality Notes -->
      <section id="quality">
        <h2>Quality Notes and Risks</h2>

        <h3>Complexity Hotspots</h3>
        <div class="card">
          <h4>Scene.tsx (~550 lines)</h4>
          <p>This file contains all 3D-related components and could benefit from splitting into separate files:</p>
          <ul style="color: var(--text-secondary); margin-left: 20px;">
            <li><code>ParticleBackground.tsx</code></li>
            <li><code>IntroShapes.tsx</code></li>
            <li><code>PointShape.tsx</code></li>
            <li><code>ScatterToFormShape.tsx</code></li>
            <li><code>shapeUtils.ts</code> (for createShapePoints, noise3D)</li>
          </ul>
        </div>

        <h3>Architecture Observations</h3>
        <table>
          <thead>
            <tr>
              <th>Observation</th>
              <th>Status</th>
              <th>Recommendation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Monolithic Scene component</td>
              <td><span class="badge badge-orange">Moderate</span></td>
              <td>Consider splitting for maintainability</td>
            </tr>
            <tr>
              <td>No tests detected</td>
              <td><span class="badge badge-orange">Moderate</span></td>
              <td>Add unit tests for shape generation functions</td>
            </tr>
            <tr>
              <td>Client-side only rendering</td>
              <td><span class="badge badge-green">Good</span></td>
              <td>Appropriate for 3D interactive content</td>
            </tr>
            <tr>
              <td>Dynamic import for Scene</td>
              <td><span class="badge badge-green">Good</span></td>
              <td>Correctly avoids SSR for Three.js</td>
            </tr>
            <tr>
              <td>Hardcoded shape data</td>
              <td><span class="badge badge-blue">Info</span></td>
              <td>Could be moved to config file if frequently changed</td>
            </tr>
          </tbody>
        </table>

        <h3>Suggested Next Steps</h3>
        <ol style="color: var(--text-secondary); margin-left: 20px;">
          <li>Split Scene.tsx into smaller, focused components</li>
          <li>Add Jest/Vitest tests for shape point generation functions</li>
          <li>Consider extracting animation configurations to a separate config file</li>
          <li>Add error boundaries around 3D canvas for graceful fallback</li>
          <li>Implement loading states for 3D assets if models are added later</li>
        </ol>
      </section>

      <!-- Footer -->
      <footer>
        <h4>Analysis Metadata</h4>
        <table>
          <tbody>
            <tr>
              <td><strong>Generated</strong></td>
              <td id="generatedDate"></td>
            </tr>
            <tr>
              <td><strong>Analysis Type</strong></td>
              <td>Static analysis only (no code execution)</td>
            </tr>
            <tr>
              <td><strong>Excluded Directories</strong></td>
              <td>node_modules, .next, .git, dist, build</td>
            </tr>
            <tr>
              <td><strong>Scope</strong></td>
              <td>Full project (small codebase, no sampling required)</td>
            </tr>
            <tr>
              <td><strong>Confidence Level</strong></td>
              <td>High - simple project structure with clear patterns</td>
            </tr>
          </tbody>
        </table>

        <div class="info-box note" style="margin-top: 20px;">
          <strong>Inferences made:</strong>
          <ul style="margin: 10px 0 0 20px; color: var(--text-secondary);">
            <li>Project purpose inferred from code structure and shape data (confirmed by visible UI text)</li>
            <li>Module relationships derived from import statements</li>
            <li>Animation flow traced through prop drilling pattern</li>
          </ul>
        </div>
      </footer>
    </main>
  </div>

  <script>
    // Set generation date
    document.getElementById('generatedDate').textContent = new Date().toLocaleString();

    // Collapsible functionality
    function toggleCollapse(element) {
      element.classList.toggle('collapsed');
      const content = element.nextElementSibling;
      content.classList.toggle('hidden');
    }

    // Search functionality
    const searchInput = document.getElementById('searchInput');
    const searchResults = document.getElementById('searchResults');

    const searchableItems = [
      { name: 'Scene', section: '#modules', type: 'Component' },
      { name: 'Home', section: '#architecture', type: 'Page' },
      { name: 'PointShape', section: '#modules', type: 'Component' },
      { name: 'ScatterToFormShape', section: '#modules', type: 'Component' },
      { name: 'IntroShapes', section: '#modules', type: 'Component' },
      { name: 'ParticleBackground', section: '#modules', type: 'Component' },
      { name: 'ShapeData', section: '#types', type: 'Interface' },
      { name: 'SceneProps', section: '#types', type: 'Interface' },
      { name: 'createShapePoints', section: '#modules', type: 'Function' },
      { name: 'scrollProgress', section: '#sequence', type: 'Prop' },
      { name: 'Three.js', section: '#dependencies', type: 'Library' },
      { name: 'React Three Fiber', section: '#dependencies', type: 'Library' },
      { name: 'Next.js', section: '#overview', type: 'Framework' },
    ];

    searchInput.addEventListener('input', function() {
      const query = this.value.toLowerCase();
      searchResults.innerHTML = '';

      if (query.length < 2) return;

      const matches = searchableItems.filter(item =>
        item.name.toLowerCase().includes(query)
      );

      matches.forEach(item => {
        const div = document.createElement('div');
        div.className = 'search-result-item';
        div.innerHTML = `<strong>${item.name}</strong> <span style="color: var(--text-secondary); font-size: 0.8rem;">(${item.type})</span>`;
        div.onclick = () => {
          window.location.hash = item.section;
          searchResults.innerHTML = '';
          searchInput.value = '';
        };
        searchResults.appendChild(div);
      });
    });

    // Active nav link highlighting
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section');

    window.addEventListener('scroll', () => {
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (scrollY >= sectionTop - 100) {
          current = section.getAttribute('id');
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
          link.classList.add('active');
        }
      });
    });
  </script>
</body>
</html>
